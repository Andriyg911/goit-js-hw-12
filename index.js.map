{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// üîπ –¢–≤—ñ–π –∫–ª—é—á –ø—Ä–æ–ø–∏—Å–∞–Ω–∏–π –Ω–∞–ø—Ä—è–º—É\nconst API_KEY = '51566476-370d8ae35b5995096aee585ea';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst DEFAULT_PARAMS = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n};\n\n/**\n * –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞ –∑–∞–ø–∏—Ç–æ–º\n * @param {string} query - –ø–æ—à—É–∫–æ–≤–µ —Å–ª–æ–≤–æ\n * @param {number} page - –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n * @returns {Promise<Object>}\n */\nexport async function getImagesByQuery(query, page) {\n  const { data } = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      ...DEFAULT_PARAMS,\n    },\n  });\n\n  return data;\n}","// –§—É–Ω–∫—Ü—ñ—ó UI-—Ä–µ–Ω–¥–µ—Ä—É —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–∏–¥–∏–º—ñ—Å—Ç—é –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ + SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst loaderEl = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n/**\n * –°—Ç–≤–æ—Ä—é—î —Ç–∞ –¥–æ–¥–∞—î —Ä–æ–∑–º—ñ—Ç–∫—É –∫–∞—Ä—Ç–æ–∫ –≥–∞–ª–µ—Ä–µ—ó –∑–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é.\n * @param {Array<Object>} images\n */\nexport function createGallery(images) {\n  if (!Array.isArray(images) || images.length === 0) return;\n\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${escapeHtml(tags)}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <div class=\"info-item\">\n            <b>Likes</b>\n            <span>${likes ?? 0}</span>\n          </div>\n          <div class=\"info-item\">\n            <b>Views</b>\n            <span>${views ?? 0}</span>\n          </div>\n          <div class=\"info-item\">\n            <b>Comments</b>\n            <span>${comments ?? 0}</span>\n          </div>\n          <div class=\"info-item\">\n            <b>Downloads</b>\n            <span>${downloads ?? 0}</span>\n          </div>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n/** –û—á–∏—â–∞—î –≥–∞–ª–µ—Ä–µ—é */\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\n/** –ü–æ–∫–∞–∑–∞—Ç–∏ –ª–æ–∞–¥–µ—Ä */\nexport function showLoader() {\n  loaderEl.classList.remove('is-hidden');\n  loaderEl.setAttribute('aria-hidden', 'false');\n}\n\n/** –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –ª–æ–∞–¥–µ—Ä */\nexport function hideLoader() {\n  loaderEl.classList.add('is-hidden');\n  loaderEl.setAttribute('aria-hidden', 'true');\n}\n\n/** –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É Load more */\nexport function showLoadMoreButton() {\n  loadMoreBtnEl.classList.remove('is-hidden');\n}\n\n/** –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É Load more */\nexport function hideLoadMoreButton() {\n  loadMoreBtnEl.classList.add('is-hidden');\n}\n\n/** –ï–ª–µ–º–µ–Ω—Ç –≥–∞–ª–µ—Ä–µ—ó (–¥–ª—è —Å–∫—Ä–æ–ª—É) */\nexport function getGalleryElement() {\n  return galleryEl;\n}\n\n/** –ö–Ω–æ–ø–∫–∞ Load more (–¥–ª—è –æ–±—Ä–æ–±–Ω–∏–∫–∞) */\nexport function getLoadMoreButton() {\n  return loadMoreBtnEl;\n}\n\n/* –í—Ç–µ—á–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ñ–≤ —É alt/—Ç–µ–∫—Å—Ç–∞—Ö */\nfunction escapeHtml(str = '') {\n  return String(str)\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#39;');\n}","// –ì–æ–ª–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞: –ø–æ—à—É–∫, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è, –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\nimport './css/styles.css';\n\nconst PER_PAGE = 15;\n\n// –ù–æ–≤—ñ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst loaderEl = document.querySelector('.loader');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalPages = 0;\n\nformEl.addEventListener('submit', onSearchSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMore);\n\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n\n  const query = e.target.query.value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: '–£–≤–∞–≥–∞',\n      message: '–í–≤–µ–¥—ñ—Ç—å –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader(loaderEl);\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(currentQuery, currentPage);\n    if (hits.length === 0) {\n      iziToast.info({\n        title: '–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ',\n        message: '–°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(hits);\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch {\n    iziToast.error({\n      title: '–ü–æ–º–∏–ª–∫–∞',\n      message: '–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∑ Pixabay',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(loaderEl);\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  showLoader(loaderEl);\n\n  try {\n    const { hits } = await getImagesByQuery(currentQuery, currentPage);\n    createGallery(hits);\n    smoothScroll();\n\n    if (currentPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch {\n    iziToast.error({\n      title: '–ü–æ–º–∏–ª–∫–∞',\n      message: '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –±—ñ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(loaderEl);\n  }\n}\n\nfunction smoothScroll() {\n  const firstCard = galleryEl.firstElementChild;\n  if (!firstCard) return;\n  const { height } = firstCard.getBoundingClientRect();\n  window.scrollBy({ top: height * 2, behavior: 'smooth' });\n}"],"names":["API_KEY","BASE_URL","DEFAULT_PARAMS","getImagesByQuery","query","page","data","axios","galleryEl","loadMoreBtnEl","loaderEl","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","escapeHtml","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","str","PER_PAGE","formEl","currentQuery","currentPage","totalPages","onSearchSubmit","onLoadMore","e","iziToast","hits","totalHits","smoothScroll","firstCard","height"],"mappings":"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"}